<!-- MathJax Configuration -->
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true,
      autoload: {
        color: [],
        colorv2: ['color'],
        bbox: ['bbox'],
        cancel: ['cancel', 'bcancel', 'xcancel', 'cancelto'],
        enclose: ['enclose'],
        extpfeil: ['extpfeil', 'xtwoheadrightarrow', 'xtwoheadleftarrow', 'xmapsto',
                   'xlongequal', 'xtofrom', 'xrightleftarrows'],
        mhchem: ['ce', 'pu'],
        unicode: ['unicode'],
        verb: ['verb']
      }
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      ignoreHtmlClass: 'tex2jax_ignore',
      processHtmlClass: 'tex2jax_process'
    }
  };
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Additional MathJax configuration for better rendering -->
<script>
  window.MathJax = {
    tex: {
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '0.8em',
      useLabelIds: true,
      multlineWidth: '85%',
      tagformat: {
        number: function (n) { return n.toString(); },
        tag: function (tag) { return '(' + tag + ')'; },
        id: function (id) { return 'mjx-eqn-' + id.replace(/\s/g, '_'); },
        url: function (id, base) { return base + '#' + encodeURIComponent(id); }
      }
    },
    options: {
      menuOptions: {
        settings: {
          zoom: 'DoubleClick',
          CTRL: false,
          ALT: false,
          CMD: false,
          Shift: false,
          scale: 1.2
        }
      }
    }
  };
</script>
